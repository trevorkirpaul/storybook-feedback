'use strict';function _interopDefault(a){return a&&"object"==typeof a&&"default"in a?a["default"]:a}var React$1=_interopDefault(require("react")),addons=_interopDefault(require("@storybook/addons")),firebase=require("firebase"),styled=_interopDefault(require("styled-components")),extendStatics=function(a,c){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])},extendStatics(a,c)};function __extends(a,c){function b(){this.constructor=a}extendStatics(a,c),a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}function __rest(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function __makeTemplateObject(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a}var templateObject_1,templateObject_1$1,Button=styled.button(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  border: none;\n  border-radius: 4px;\n  background-color: palevioletred;\n  padding: 5px 10px;\n  color: #ffffff;\n\n  &:hover {\n    cursor: pointer;\n  }\n"],["\n  border: none;\n  border-radius: 4px;\n  background-color: palevioletred;\n  padding: 5px 10px;\n  color: #ffffff;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]))),Button$1=function(a){var b=a.children,c=a.onClick;return React$1.createElement(Button,{onClick:c},b)},googleSignIn=function(){var a=new firebase.auth.GoogleAuthProvider;return firebase.auth().signInWithRedirect(a).then(function(a){console.log(a)}).catch(function(a){console.log(a)})},getUserSession=function(){return firebase.auth().getRedirectResult().then(function(a){return a.credential&&a.user?{error:!1,credential:a.credential,displayName:a.user.displayName,email:a.user.email,avatar:a.user.photoURL}:{error:!0,credential:null,displayName:null,email:null,avatar:null}}).catch(function(){return{error:!0,credential:null,displayName:null,email:null,avatar:null}})},Heading=styled(function(a){var b=a.as,c=__rest(a,["as"]);return React$1.createElement(b,c)})(templateObject_1$1||(templateObject_1$1=__makeTemplateObject([""],[""]))),Heading$1=function(a){var b=a.as,c=a.children,d=a.className;return React$1.createElement(Heading,{className:d,as:b},c)};Heading$1.defaultProps={as:"h1"};var templateObject_1$2,Text=styled(function(a){var b=a.as,c=__rest(a,["as"]);return React.createElement(b,c)})(templateObject_1$2||(templateObject_1$2=__makeTemplateObject(["\n  color: #383838;\n"],["\n  color: #383838;\n"]))),Text$1=function(a){var b=a.as,c=a.children,d=a.className;return React$1.createElement(Text,{as:b,className:d},c)};Text$1.defaultProps={as:"span"};var templateObject_1$3,templateObject_2,templateObject_3,templateObject_1$4,templateObject_1$5,templateObject_2$1,templateObject_1$6,Login=styled.div(templateObject_1$3||(templateObject_1$3=__makeTemplateObject(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  height: 100%;\n\n  max-width: 300px;\n  margin: 0 auto;\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  height: 100%;\n\n  max-width: 300px;\n  margin: 0 auto;\n"]))),Heading$2=styled(Heading$1)(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  margin-bottom: 15px;\n"],["\n  margin-bottom: 15px;\n"]))),Text$2=styled(Text$1)(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  margin-bottom: 15px;\n"],["\n  margin-bottom: 15px;\n"]))),Login$1=function(){return React$1.createElement(Login,null,React$1.createElement(Heading$2,{as:"h3"},"Please Sign In"),React$1.createElement(Text$2,null,"In order to contribute/leave comments, you must be signed in. Click on the button to sign in through Google."),React$1.createElement(Button$1,{onClick:function(){return googleSignIn()}},"Sign In"))},Chat=styled.div(templateObject_1$4||(templateObject_1$4=__makeTemplateObject(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  height: 100%;\n"],["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  height: 100%;\n"]))),Chat$1=function(a){var b=a.children;return React$1.createElement(Chat,null,b)},Avatar=styled.div(templateObject_1$5||(templateObject_1$5=__makeTemplateObject([""],[""]))),Image=styled.img(templateObject_2$1||(templateObject_2$1=__makeTemplateObject(["\n  width: 50px;\n  height: 50px;\n\n  border-radius: 50%;\n"],["\n  width: 50px;\n  height: 50px;\n\n  border-radius: 50%;\n"]))),Avatar$1=function(a){var b=a.source;return React$1.createElement(Avatar,null,React$1.createElement(Image,{src:b,alt:"user-avatar"}))},sendComment=function(a){var b=a.content,c=a.author;return firebase.database().ref("comments/").push({content:b,author:c})},Input=styled.input(templateObject_1$6||(templateObject_1$6=__makeTemplateObject(["\n  padding: 5px 10px;\n  border-radius: 4px;\n  border: 1px solid #383838;\n  background-color: #fff;\n"],["\n  padding: 5px 10px;\n  border-radius: 4px;\n  border: 1px solid #383838;\n  background-color: #fff;\n"]))),Input$1=function(a){var b=a.name,c=a.value,d=a.placeholder,e=a.onChange,f=a.type,g=a.className;return React$1.createElement(Input,{className:g,name:b,type:f,value:c,placeholder:d,onChange:e})};Input$1.defaultProps={type:"text"};var templateObject_1$7,templateObject_2$2,templateObject_3$1,ActionBar=styled.div(templateObject_1$7||(templateObject_1$7=__makeTemplateObject(["\n  width: 100%;\n  background-color: #eeeeee;\n  padding: 15px;\n\n  display: flex;\n  justify-content: space-between;\n"],["\n  width: 100%;\n  background-color: #eeeeee;\n  padding: 15px;\n\n  display: flex;\n  justify-content: space-between;\n"]))),MessageSection=styled.div(templateObject_2$2||(templateObject_2$2=__makeTemplateObject([""],[""]))),Input$2=styled(Input$1)(templateObject_3$1||(templateObject_3$1=__makeTemplateObject(["\n  margin-right: 5px;\n"],["\n  margin-right: 5px;\n"]))),ActionBar$1=function(a){var b=a.avatar,c=a.userEmail,d=React$1.useState({message:""}),e=d[0],f=d[1],g=function(){return sendComment({content:e.message,author:c}),f({message:""})};return React$1.createElement(ActionBar,null,React$1.createElement(Avatar$1,{source:b}),React$1.createElement(MessageSection,null,React$1.createElement(Input$2,{name:"message",onChange:function(a){var b=a.currentTarget.value;return f({message:b})},value:e.message}),React$1.createElement(Button$1,{onClick:function(){return g()}},"Send")))},Feedback=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={displayName:"",email:"",avatar:"",credential:"",refreshToken:"",signInError:!1},b}return __extends(b,a),b.prototype.componentDidMount=function(){var a=this;firebase.auth().onAuthStateChanged(function(b){if(b){var c=b.displayName,d=b.email,e=b.photoURL,f=b.refreshToken;a.setState(function(){return{displayName:c,email:d,refreshToken:f,avatar:e}})}}),getUserSession().then(function(b){if(!b.error){var c=b.credential,d=b.displayName,e=b.email,f=b.avatar;return console.log({credential:c,displayName:d,email:e,avatar:f}),a.setState({credential:c,displayName:d,email:e,avatar:f})}}).catch(function(){return a.setState({signInError:!0})})},b.prototype.render=function(){var a=this.props.active,b=this.state,c=b.email,d=b.avatar;return a?a?c?React$1.createElement(Chat$1,null,React$1.createElement("h2",null,"Feedback"),React$1.createElement(ActionBar$1,{avatar:d,userEmail:c})):React$1.createElement(Login$1,null):void 0:null},b}(React$1.Component),FB_API_KEY="AIzaSyBovpeVfPHnH_zNB17nn-Svfz8nlaqDGrc",FB_AUTH_DOMAIN="storybook-feedback.firebaseapp.com",FB_DB_URL="https://storybook-feedback.firebaseio.com",FB_PROJECT_ID="storybook-feedback",FB_STORAGE_BUCKET="storybook-feedback.appspot.com",FB_MESSAGING_SENDER_ID="514439096132",app=firebase.initializeApp({apiKey:FB_API_KEY,authDomain:FB_AUTH_DOMAIN,databaseURL:FB_DB_URL,projectId:FB_PROJECT_ID,storageBucket:FB_STORAGE_BUCKET,messagingSenderId:FB_MESSAGING_SENDER_ID}),database=firebase.database();addons.register("Feedback",function(a){addons.addPanel("Feedback/panel",{title:"Feedback",render:function(b){var c=b.active,d=b.key;return React$1.createElement(Feedback,{key:d,api:a,active:c,database:database})}})});
